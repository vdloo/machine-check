<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html><head><meta http-equiv="content-type" content="text/html; charset=utf-8"/><meta name="viewport" content="width=device-width, initial-scale=0.8"/><title>machine-check: Unit test your server configuration</title><link rel="stylesheet" type="text/css" href="scribble.css" title="default"/><link rel="stylesheet" type="text/css" href="manual-style.css" title="default"/><link rel="stylesheet" type="text/css" href="manual-racket.css" title="default"/><script type="text/javascript" src="scribble-common.js"></script><script type="text/javascript" src="manual-racket.js"></script><!--[if IE 6]><style type="text/css">.SIEHidden { overflow: hidden; }</style><![endif]--></head><body id="scribble-racket-lang-org"><div class="tocset"><div class="tocview"><div class="tocviewlist tocviewlisttopspace"><div class="tocviewtitle"><table cellspacing="0" cellpadding="0"><tr><td style="width: 1em;"><a href="javascript:void(0);" title="Expand/Collapse" class="tocviewtoggle" onclick="TocviewToggle(this,&quot;tocview_0&quot;);">&#9658;</a></td><td></td><td><a href="index.html" class="tocviewselflink" data-pltdoc="x">machine-<wbr></wbr>check:<span class="mywbr"> &nbsp;</span> Unit test your server configuration</a></td></tr></table></div><div class="tocviewsublistonly" style="display: none;" id="tocview_0"><table cellspacing="0" cellpadding="0"><tr><td align="right">1&nbsp;</td><td><a href="index.html#%28part._.Introduction%29" class="tocviewlink" data-pltdoc="x">Introduction</a></td></tr><tr><td align="right">2&nbsp;</td><td><a href="index.html#%28part._.Description%29" class="tocviewlink" data-pltdoc="x">Description</a></td></tr><tr><td align="right">3&nbsp;</td><td><a href="index.html#%28part._.Usage%29" class="tocviewlink" data-pltdoc="x">Usage</a></td></tr><tr><td align="right">4&nbsp;</td><td><a href="index.html#%28part._.Development%29" class="tocviewlink" data-pltdoc="x">Development</a></td></tr><tr><td align="right">5&nbsp;</td><td><a href="index.html#%28part._.Documentation%29" class="tocviewlink" data-pltdoc="x">Documentation</a></td></tr></table></div></div></div><div class="tocsub"><table class="tocsublist" cellspacing="0"><tr><td><span class="tocsublinknumber"></span><a href="#%28part._machine-check__.Unit_test_your_server_configuration%29" class="tocsubseclink" data-pltdoc="x">machine-<wbr></wbr>check:<span class="mywbr"> &nbsp;</span> Unit test your server configuration</a></td></tr><tr><td><span class="tocsublinknumber">1<tt>&nbsp;</tt></span><a href="#%28part._.Introduction%29" class="tocsubseclink" data-pltdoc="x">Introduction</a></td></tr><tr><td><span class="tocsublinknumber">2<tt>&nbsp;</tt></span><a href="#%28part._.Description%29" class="tocsubseclink" data-pltdoc="x">Description</a></td></tr><tr><td><span class="tocsublinknumber">3<tt>&nbsp;</tt></span><a href="#%28part._.Usage%29" class="tocsubseclink" data-pltdoc="x">Usage</a></td></tr><tr><td><span class="tocsublinknumber">4<tt>&nbsp;</tt></span><a href="#%28part._.Development%29" class="tocsubseclink" data-pltdoc="x">Development</a></td></tr><tr><td><span class="tocsublinknumber">5<tt>&nbsp;</tt></span><a href="#%28part._.Documentation%29" class="tocsubseclink" data-pltdoc="x">Documentation</a></td></tr></table></div></div><div class="maincolumn"><div class="main"><div class="versionbox"><span class="versionNoNav">8.3</span></div><h2><a name="(part._machine-check__.Unit_test_your_server_configuration)"></a>machine-check: Unit test your server configuration</h2><div class="SAuthorListBox"><span class="SAuthorList"><p class="author">Rick van de Loo</p></span></div><h3>1<tt>&nbsp;</tt><a name="(part._.Introduction)"></a>Introduction</h3><p>With machine-check you can write unit tests in Racket to verify if the state of your machine is what you expect.</p><p>See the code at <a href="https://github.com/vdloo/machine-check">on github</a>.</p><h3>2<tt>&nbsp;</tt><a name="(part._.Description)"></a>Description</h3><p>If you use configuration management tools you might want to check if the state of your machine is exactly as you expected it after applying the state. For example after a Puppet, SaltStack or Ansible run it might be wise to check if you actually have the packages installed that you wanted to enforce, and if the files you templated exist in the places and with the content you expected.</p><p>While very minimal, this project aspires to provide similar functionality to what <a href="https://github.com/pytest-dev/pytest-testinfra">pytest-testinfra</a> does in Python and <a href="https://serverspec.org/">serverspec</a> does in Ruby.</p><h3>3<tt>&nbsp;</tt><a name="(part._.Usage)"></a>Usage</h3><p>See the <a href="https://github.com/vdloo/machine-check/tree/master/examples">examples dir</a> for an example of how to use this project. It comes down to placing your Racket unit tests in machine-check/checks-to-perform and running machine-check.</p><p>If you want a quick copy-paste-able example:</p><p><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt">git clone https://github.com/vdloo/machine-check</span></p></td></tr><tr><td><p><span class="stt">cd machine-check</span></p></td></tr><tr><td><p><span class="stt">raco pkg install --deps search-auto</span></p></td></tr><tr><td><p><span class="stt">cp examples/simple/main.rkt.example checks-to-perform/main.rkt</span></p></td></tr><tr><td><p><span class="stt"># And finally, run the program</span></p></td></tr><tr><td><p><span class="stt">make run</span><span class="hspace">&nbsp;&nbsp;</span><span class="stt"># or ./main.rkt</span></p></td></tr></table></p><h3>4<tt>&nbsp;</tt><a name="(part._.Development)"></a>Development</h3><p>To run the unit tests for machine-check (for the software, not the system unit tests which the software is for) run:</p><p><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt">raco pkg install --deps search-auto</span></p></td></tr><tr><td><p><span class="stt">make test</span></p></td></tr></table></p><h3>5<tt>&nbsp;</tt><a name="(part._.Documentation)"></a>Documentation</h3><p>To generate the documentation run:</p><p><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt">make docs</span><span class="hspace">&nbsp;&nbsp;</span><span class="stt"># Output in docs/index.html</span></p></td></tr></table></p></div></div><div id="contextindicator">&nbsp;</div></body></html>